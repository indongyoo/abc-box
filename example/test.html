<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>abcjs - TEST</title>
</head>
<body>
<!--<script src="js/underscore.js"></script>-->
<script src="js/jquery.js"></script>
<script src="js/abc.js"></script>
<script src="../abc.box.js"></script>
<script>
  !function (window, $, Box) {
    var users = [
      {name: '필정', id: 3, b: [{a: 1}, {a: 2}, {a: 3}]},
      {name: '필정', id: 3, b: [{a: 1}, {a: 2}, {a: 3}]},
      {name: '^^', id: 4, b: [{a: 1}, {a: 2}, {a: 3}]}
    ]; // data;

    $(B(new Box('users', users), [
      B.div(I, J([
        {id: 1, like: 10},
        {id: 2, like: 1},
        {id: 3, like: 4}
      ])),
      B.method('set', 'posts'),
      function(box) {
        box.set({
          reviews: [
            {id: 1, title: '^^'},
            {id: 2, title: ':-)'},
            {id: 3, title: '3.3'}
          ],
          a: {
            posts: box.find('posts')
          }
        });
        console.log(box.find('a->posts') == box.find('posts')
          && box.__cache__()['a->posts'] == box.find('posts')
          && box.__cache__()['posts'] == box.find('a->posts')
          && box.find('a->posts') == box.__data__()['posts']
          && true); // true
    
        box.set('not work'); // not work;
        box.set('good work', []); // good work;
        box.set('very good work', {}); // very good work;
        console.log(box.find('users->0->b->2')); // Object { a: 3 }
        console.log(box.find('posts->0')); // Object {id: 1, like: 10}
        console.log(box.find('reviews->(_.title=="^^")')); // Object {id: 1, title: "^^"}
        console.log(box.find('reviews->(_.title==":-)")') == box.__cache__()['reviews->(_.title==":-)")']); //true
      }
    ]));

  }(window, $, Box);
</script>
</body>
</html>
